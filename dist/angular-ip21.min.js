!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("angular")):"function"==typeof define&&define.amd?define("angular-ip21",["angular"],r):"object"==typeof exports?exports["angular-ip21"]=r(require("angular")):e["angular-ip21"]=r(e.angular)}(this,function(__WEBPACK_EXTERNAL_MODULE_1__){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=2)}([function(module,exports,__webpack_require__){"use strict";function ip21SqlService($http,$q){function create(url,port){function execute(query,isSelect){var deferred=$q.defer(),s=isSelect?1:0,payload='<SQL c="DRIVER={AspenTech SQLplus};HOST='+config.host+";Port="+port+";"+config.adsa+'" s="'+s+'"><![CDATA['+query+"]]></SQL>";return $http({method:"POST",url:url,data:payload,withCredentials:!0,transformResponse:[function(data){try{return JSON.parse(data)}catch(err){var obj;return void eval("obj = "+data)}}],headers:{"Content-Type":"text/plain"}}).then(function(e){isSelect?deferred.resolve(parseDataSelect(e)):deferred.resolve(parseDataNonSelect(e))}).catch(function(e){deferred.reject(e)}),deferred.promise}function parseDataSelect(e){var r=e.data.data;if(r.result&&r.result.es)throw"O Web Service do InfoPlus.21 retornou um erro: "+r.result.es;if("E"===r[0].r)throw"O Web Service do InfoPlus.21 retornou um erro: "+r[0].aes;if("N"===r[0].r)return[];if(Number.isInteger(n))return n;var t=r[0].cols.reduce(function(e,r){return e[r.i]=r.n,e},{}),n=[];return r[0].rows.forEach(function(e){var r=e.fld.reduce(function(e,r){return e[t[r.i]]=r.v,e},{});n.push(r)}),n}function parseDataNonSelect(e){var r=e.data.data;if(r.result&&r.result.es)throw"O Web Service do InfoPlus.21 retornou um erro: "+r.result.es;if("E"===r[0].r)throw"O Web Service do InfoPlus.21 retornou um erro: "+r[0].aes;return"N"===r[0].r?[]:e}function executeSelect(e){return execute(e,!0)}function executeNonSelect(e){return execute(e,!1)}var config=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof url)throw new TypeError("create expects a valid URL string as first parameter");if("number"!=typeof port)throw new TypeError("create expects a valid Port number as first parameter");return config.asda=config.asda||"CHARINT=N;CHARFLOAT=N;CHARTIME=N;CONVERTERRORS=N",config.host=config.host||"localhost",{executeSelect:executeSelect,executeNonSelect:executeNonSelect}}return{create:create}}Object.defineProperty(exports,"__esModule",{value:!0}),ip21SqlService.$inject=["$http","$q"],exports.default=ip21SqlService},function(e,r){e.exports=__WEBPACK_EXTERNAL_MODULE_1__},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=t(1),u=n(o),a=t(0),c=n(a),i=u.default.module("angular-ip21",[]).factory("ip21SqlService",c.default).name;r.default=i}])});
//# sourceMappingURL=angular-ip21.min.js.map